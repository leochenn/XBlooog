[TOC]

## Binder机制

### 写给android应用开发者的binder原理剖析

知乎专栏地址：[点我](https://zhuanlan.zhihu.com/p/35519585)

- Binder能做什么

  四大组件跨进程通讯、系统对应用层提供的各种服务都是基于Binder IPC机制来实现

- 为什么选择Binder

  安卓系统基于Linux内核，已经提供了管道、消息队列、共享内存和socket等IPC机制，之所以在安卓上选择Binder，基于几个方面的考量

  - 性能：Binder只需要进行一次数据拷贝，性能仅次于共享内存
  - 稳定性：Binder基于cs架构，架构清晰 职责明确
  - 安全性：安卓为每个应用分配了UID，作为鉴别进程身份的重要标志

- 进程间通信原理

  跨进程通信涉及到的一些基本概念：

  - 进程隔离

    在操作系统中，进程与进程间内存是不共享的，不能直接跨进程访问数据，所以才有了特殊的IPC-进程间通信

  - 进程空间划分

    操作系统的核心是内核，独立于应用程序，可以访问受保护的内存空间，也可以访问底层硬件设备的权限，为了保证用户进程不能直接操作内核，保证内核的安全，从逻辑上将虚拟空间划分为用户空间和内核空间

    `简单的说就是，内核空间（Kernel）是系统内核运行的空间，用户空间（User Space）是用户程序运行的空间。为了保证安全性，它们之间是隔离的 `

  - 系统调用

    虽然进行了内存空间的划分